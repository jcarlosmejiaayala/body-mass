!function(){"use strict";angular.module("bodyMass",["ngAnimate","ngCookies","ngTouch","ngSanitize","ngResource","ui.router","ui.bootstrap"])}(),function(){"use strict";function o(o,t){this.submit=function(){o.login(this.formdata).then(function(){t.go("main")})}}angular.module("bodyMass").controller("LoginController",["Auth","$state",o])}(),function(){"use strict";function o(o,t,n){this.submit=function(){o.createUser(this.formdata).then(function(){t.info("User created","Success"),n.go("main")})["catch"](function(o){t.error("Something happened insperado","Failed")})}}angular.module("bodyMass").controller("CreateAccountController",["Auth","toastr","$state",o])}(),function(){"use strict";function o(){function o(o,t){this.logout=function(){o.logout(),t.go("login")}}return{restrict:"E",templateUrl:"app/components/navbar/navbar.html",controller:o,controllerAs:"navbar",bindToController:!0}}angular.module("bodyMass").directive("navbarMenu",[o])}(),function(){"use strict";angular.module("bodyMass").factory("User",["$resource",function(o){return o("/api/users/:id/:controller",{id:"@_id"},{changePassword:{method:"PUT",params:{controller:"password"}},get:{method:"GET",params:{id:"me"}}})}])}(),function(){"use strict";angular.module("bodyMass").factory("Auth",["$location","$rootScope","$http","User","$cookieStore","$q",function(o,t,n,e,a,r){var s={};return a.get("token")&&(s=e.get()),{login:function(o,t){var l=t||angular.noop,i=r.defer();return n.post("/auth/local",{email:o.email,password:o.password}).success(function(o){return a.put("token",o.token),s=e.get(),i.resolve(o),l()}).error(function(o){return this.logout(),i.reject(o),l(o)}.bind(this)),i.promise},logout:function(){a.remove("token"),s={}},createUser:function(o,t){var n=t||angular.noop;return e.save(o,function(t){return a.put("token",t.token),s=e.get(),n(o)},function(o){return this.logout(),n(o)}.bind(this)).$promise},changePassword:function(o,t,n){var a=n||angular.noop;return e.changePassword({id:s._id},{oldPassword:o,newPassword:t},function(o){return a(o)},function(o){return a(o)}).$promise},getCurrentUser:function(){return s},isLoggedIn:function(){return s.hasOwnProperty("role")},isLoggedInAsync:function(o){s.hasOwnProperty("$promise")?s.$promise.then(function(){o(!0)})["catch"](function(){o(!1)}):o(s.hasOwnProperty("role")?!0:!1)},isAdmin:function(){return"admin"===s.role},getToken:function(){return a.get("token")}}}])}(),function(){"use strict";function o(){this.calculate=function(){this.bmi=this.weight/Math.pow(this.height/100,2),this.legend=this.bmi<16?"Underweight":this.bmi>40?"Overweight":"Normal"}}angular.module("bodyMass").controller("MainController",[o])}(),function(){"use strict";function o(o,t,n){o.$on("$stateChangeStart",function(o,e){n.isLoggedInAsync(function(n){e.authenticate&&!n&&(o.preventDefault(),t.path("/login"))})})}angular.module("bodyMass").run(o),o.$inject=["$rootScope","$location","Auth"]}(),function(){"use strict";function o(o,t){var n=[];n.push({name:"login",url:"/login",templateUrl:"app/components/account/login/login.html",controller:"LoginController",controllerAs:"login"}),n.push({name:"createAccount",url:"/create-account",templateUrl:"app/components/account/create/create.html",controller:"CreateAccountController",controllerAs:"create"}),n.push({name:"main",url:"/",templateUrl:"app/main/main.html",controller:"MainController",controllerAs:"main"}),n.forEach(function(t){o.state(t)}),t.otherwise("/login")}angular.module("bodyMass").config(o),o.$inject=["$stateProvider","$urlRouterProvider"]}(),function(){"use strict";angular.module("bodyMass").constant("malarkey",malarkey).constant("toastr",toastr).constant("moment",moment)}(),function(){"use strict";function o(o,t,n,e){o.html5Mode(!0),t.interceptors.push("authInterceptor"),n.debugEnabled(!0),e.options.timeOut=3e3,e.options.positionClass="toast-top-right",e.options.preventDuplicates=!0,e.options.progressBar=!0}function t(o,t,n,e){return{request:function(o){return o.headers=o.headers||{},n.get("token")&&(o.headers.Authorization="Bearer "+n.get("token")),o},responseError:function(o){return 401===o.status?(e.path("/login"),n.remove("token"),t.reject(o)):t.reject(o)}}}angular.module("bodyMass").config(o).factory("authInterceptor",t),o.$inject=["$locationProvider","$httpProvider","$logProvider","toastr"],t.$inject=["$rootScope","$q","$cookieStore","$location"]}(),angular.module("bodyMass").run(["$templateCache",function(o){o.put("app/main/main.html",'<div class="container"><navbar-menu></navbar-menu><div class="row main"><div class="col-xs-12 col-md-6 col-md-offset-3"><div class="panel panel-default"><div class="panel-heading"><h3 class="panel-title">Calculate The Body Mass Index</h3></div><div class="panel-body"><div class="form-group"><label>height (cm)</label> <input ng-model="main.height" class="form-control"></div><div class="form-group"><label>weight (kg)</label> <input ng-model="main.weight" class="form-control"></div><div class="form-group"><div class="col-xs-12 col-md-4 col-md-offset-4"><button class="btn btn-success btn-block" ng-click="main.calculate()">Calculate</button></div></div></div></div><div class="panel panel-default"><div class="panel-heading"><h3 class="panel-title">Results</h3></div><div class="panel-body"><div class="form-group"><label>Body Mass Index</label> <input class="form-control" ng-model="main.bmi" readonly=""></div><div class="form-group">Considering the BMI, you have <input ng-model="main.legend" class="form-control" readonly=""></div></div></div></div></div></div>'),o.put("app/components/navbar/navbar.html",'<nav class="navbar navbar-default navbar-static-top navbar-fixed-top"><div class="container-fluid"><div class="navbar-header"><a href="/" class="navbar-brand">BodyMass</a></div><div collapse="navbar.isCollapsed" class="navbar-collapse collapse"><ul class="nav navbar-nav navbar-right"><li><a href="" ng-click="navbar.logout()">Logout</a></li></ul></div></div></nav>'),o.put("app/components/account/create/create.html",'<div class="container"><div class="row create-account"><div class="col-xs-12 col-md-6 col-md-offset-3"><div class="panel panel-default"><div class="panel-heading"><h3 class="panel-title">Create Account</h3></div><div class="panel-body"><form ng-submit="create.submit()" novalidate=""><div class="form-group"><label>Name</label> <input ng-model="create.formdata.name" class="form-control"></div><div class="form-group"><label>email</label> <input type="email" ng-model="create.formdata.email" class="form-control"></div><div class="form-group"><label>Password</label> <input type="password" ng-model="create.formdata.password" class="form-control"></div><div class="form-group"><div class="col-xs-12 col-md-4 col-md-offset-4"><button type="submit" class="btn btn-success btn-block">Send</button></div></div></form></div></div></div></div></div>'),o.put("app/components/account/login/login.html",'<div class="container"><div class="row login"><h1 class="text-center">Body Mass</h1><div class="col-xs-12 col-md-6 col-md-offset-3"><div class="panel panel-default"><div class="panel-heading"><h3 class="panel-title">Login</h3></div><div class="panel-body"><form ng-init="login.formdata = {};" ng-submit="login.submit()" novalidate=""><div class="form-group"><label>Email</label> <input class="form-control" ng-model="login.formdata.email"></div><div class="form-group"><label>Password</label> <input type="password" class="form-control" ng-model="login.formdata.password"></div><div class="row"><div class="col-xs-12 col-md-6 col-md-offset-3 form-group"><button type="submit" class="btn btn-success btn-block">Join</button></div></div><div class="row text-right"><a ui-sref="createAccount" href="/create-account" class="btn btn-link">Create Account</a></div></form></div></div></div></div></div>')}]);